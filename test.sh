#!/bin/bash
SESSION_ID=$(curl -s -D - -X POST http://localhost:8080/mcp -H "Content-Type: application/json" -H "Accept: application/json, text/event-stream" -d '{"jsonrpc":"2.0","method":"initialize","id":1,"params":{"protocolVersion":"2024-11-05","capabilities":{},"clientInfo":{"name":"test-client","version":"1.0.0"}}}' | grep -i 'mcp-session-id' | head -1 | cut -d' ' -f2 | tr -d '\r') && curl -s -X POST http://localhost:8080/mcp -H "Content-Type: application/json" -H "Accept: application/json, text/event-stream" -H "mcp-session-id: $SESSION_ID" -d '{"jsonrpc":"2.0","method":"tools/call","id":2,"params":{"name":"search_dishes","arguments":{"query":"salmon"}}}' | grep -E "(result|error)"
